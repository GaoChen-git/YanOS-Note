# 2.2理解并发程序执行
1. 正确性不明的奇怪尝试 (Peterson 算法)  
- 厕所问题:  
    A 和 B 争用厕所的包厢  
    想进入包厢之前，A/B 都要先举起自己的旗子  
    A 确认旗子举好以后，往厕所门上贴上 “B 正在使用” 的标签  
    B 确认旗子举好以后，往厕所门上贴上 “A 正在使用” 的标签  
    然后，如果对方的旗子举起来，且门上的名字不是自己，等待  
    否则可以进入包厢  
    出包厢后，放下自己的旗子  
- 证明Peterson正确性：  
    画出状态机，我们(在完全不理解算法的前提下)证明了Sequential(顺序)内存  
    模型下 Peterson's Protocol 的 Safety。它能够实现互斥。  
- memory ordering -- 内存排序   
  
